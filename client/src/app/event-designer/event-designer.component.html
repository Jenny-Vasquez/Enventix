<div class="layout">
  <!-- Sidebar -->
  <div class="sidebar">
    <h3>DiseÃ±o del evento</h3>

    <label>Nombre del evento:</label>
    <input [(ngModel)]="eventName" placeholder="Ej. Concierto Primavera" />

    <label>DiseÃ±os guardados:</label>
    <select (change)="onDesignSelect($event)">
      <option *ngFor="let d of designs" [ngValue]="d">{{ d.name }}</option>
    </select>

    <button (click)="saveCurrentDesign()">ðŸ’¾ Guardar diseÃ±o</button>
    <button (click)="addZone()">âž• Agregar zona</button>
    <button (click)="duplicateZone()">ðŸ“„ Duplicar zona</button>
    <button (click)="addSeatRow()">ðŸª‘ Agregar fila</button>

    <label>Asientos por fila:</label>
    <input type="number" [(ngModel)]="seatsPerRowInput" min="1" />
  </div>

  <!-- DiseÃ±o -->
  <div class="design-area">
    <div class="grid" [ngStyle]="{ width: gridWidth + 'px', height: gridHeight + 'px' }">
      <div
        *ngFor="let zone of zones"
        cdkDrag
        (cdkDragEnded)="onDragEnd($event, zone)"
        class="zone"
        [ngStyle]="{
          'top.px': zone.y,
          'left.px': zone.x,
          'width.px': zone.width,
          'height.px': zone.height,
          'background-color': zone.color
        }"
        (click)="selectZone(zone)"
      >
        <div class="zone-header">
          <strong>{{ zone.name }}</strong>
          <button class="close" (click)="removeZone(zone.id)">âœ•</button>
        </div>

        <div class="seats-grid">
          <div class="seat" *ngFor="let row of zone.seatRows">
            <div
              *ngFor="let seat of row"
              class="seat-box"
              [title]="'$' + seat.price"
              [ngClass]="{
                ocupado: seat.status === 'ocupado',
                vip: seat.status === 'vip'
              }"
              (click)="toggleSeat(seat)"
            >
              {{ seat.seatNumber }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Editor -->
  <div *ngIf="selectedZone" class="editor">
    <h4>Editar {{ selectedZone.name }}</h4>
    <label>Ancho: <input type="number" [(ngModel)]="selectedZone.width" /></label>
    <label>Alto: <input type="number" [(ngModel)]="selectedZone.height" /></label>
    <label>Capacidad: <input type="number" [(ngModel)]="selectedZone.capacity" /></label>
    <label>Precio por asiento: <input type="number" [(ngModel)]="selectedZone.price" /></label>
    <label>X: <input type="number" [(ngModel)]="selectedZone.x" /></label>
    <label>Y: <input type="number" [(ngModel)]="selectedZone.y" /></label>
    <label>Color: <input type="color" [(ngModel)]="selectedZone.color" /></label>
  </div>
</div>
